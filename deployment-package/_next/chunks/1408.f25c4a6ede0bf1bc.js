(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1408],{8689:()=>{},9027:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var s=n(5155),a=n(2115),r=n(5411),o=n.n(r);function i(e){let{convoy:t,className:n=""}=e,r=(0,a.useRef)(null),i=(0,a.useRef)(null),[d,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(r.current)return o().accessToken="pk.eyJ1Ijoicm91dHN5IiwiYSI6ImNtY3ZlcmFqMjAyOW8ybXB6czB5d3ptNHoifQ.2Cso55oxJZVTHyq10QGg5g",i.current=new(o()).Map({container:r.current,style:"mapbox://styles/mapbox/navigation-day-v1",center:[-51.9253,-14.235],zoom:10,attributionControl:!1}),i.current.addControl(new(o()).NavigationControl,"top-right"),i.current.on("load",()=>{c(!0),l()}),()=>{i.current&&i.current.remove()}},[t]);let l=async()=>{if(i.current)try{let e=await u();e&&(x(e),p(e),h(e))}catch(e){console.error("Error setting up route:",e),m()}},u=async()=>{let e=[-46.6333,-23.5505],n=[-47.8825,-15.7975];return{coordinates:[e,[-46.8,-23.2],[-47.2,-22.8],[-47.5,-20.5],n],waypoints:t.waypoints||[{name:"Ponto de Partida",coordinates:e},{name:"Parada 1 - Resto",coordinates:[-46.8,-23.2],estimatedTime:"2h"},{name:"Parada 2 - Almo\xe7o",coordinates:[-47.2,-22.8],estimatedTime:"4h"},{name:"Parada 3 - Combust\xedvel",coordinates:[-47.5,-20.5],estimatedTime:"6h"},{name:"Destino Final",coordinates:n}]}},x=e=>{i.current&&(i.current.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.coordinates}}}),i.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1f9d55","line-width":6,"line-opacity":.8}}),i.current.addLayer({id:"route-outline",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffffff","line-width":8,"line-opacity":.5}},"route"))},p=e=>{i.current&&e.waypoints&&e.waypoints.forEach((t,n)=>{let s=0===n,a=n===e.waypoints.length-1,r=document.createElement("div");r.className="waypoint-marker",s?r.innerHTML='\n          <div class="w-10 h-10 bg-green-600 rounded-full border-3 border-white shadow-lg flex items-center justify-center">\n            <span class="text-white text-lg">\uD83D\uDE80</span>\n          </div>\n        ':a?r.innerHTML='\n          <div class="w-10 h-10 bg-red-600 rounded-full border-3 border-white shadow-lg flex items-center justify-center">\n            <span class="text-white text-lg">\uD83C\uDFC1</span>\n          </div>\n        ':r.innerHTML='\n          <div class="w-8 h-8 bg-blue-600 rounded-full border-2 border-white shadow-lg flex items-center justify-center">\n            <span class="text-white text-sm font-bold">'.concat(n,"</span>\n          </div>\n        ");let d=new(o()).Marker(r).setLngLat(t.coordinates).addTo(i.current),c=new(o()).Popup({offset:25,className:"waypoint-popup"}).setHTML('\n        <div class="p-3 text-center">\n          <h3 class="font-bold text-sm text-gray-900 mb-1">'.concat(t.name,"</h3>\n          ").concat(t.estimatedTime?'<p class="text-xs text-gray-600">Tempo estimado: '.concat(t.estimatedTime,"</p>"):"","\n          ").concat(s?'<p class="text-xs text-green-600 font-medium mt-1">Ponto de Partida</p>':"","\n          ").concat(a?'<p class="text-xs text-red-600 font-medium mt-1">Destino Final</p>':"","\n        </div>\n      "));d.setPopup(c)})},m=()=>{if(!i.current)return;let e=[-46.6333,-23.5505],n=[-47.8825,-15.7975];new(o()).Marker({color:"#16a34a"}).setLngLat(e).setPopup(new(o()).Popup().setHTML('\n        <div class="p-3 text-center">\n          <h3 class="font-bold text-sm">\uD83D\uDE80 '.concat(t.startLocation,'</h3>\n          <p class="text-xs text-gray-600">Sa\xedda: ').concat(t.departureTime,"</p>\n        </div>\n      "))).addTo(i.current),new(o()).Marker({color:"#dc2626"}).setLngLat(n).setPopup(new(o()).Popup().setHTML('\n        <div class="p-3 text-center">\n          <h3 class="font-bold text-sm">\uD83C\uDFC1 '.concat(t.destination,'</h3>\n          <p class="text-xs text-gray-600">Destino Final</p>\n        </div>\n      '))).addTo(i.current);let s=new(o()).LngLatBounds;s.extend(e),s.extend(n),i.current.fitBounds(s,{padding:50})},h=e=>{if(!i.current||!e.coordinates)return;let t=new(o()).LngLatBounds;e.coordinates.forEach(e=>{t.extend(e)}),i.current.fitBounds(t,{padding:50,duration:1e3})};return(0,s.jsxs)("div",{className:"relative ".concat(n),children:[(0,s.jsx)("div",{ref:r,className:"w-full h-64 rounded-lg overflow-hidden border border-gray-300 shadow-md"}),!d&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Carregando rota da manifesta\xe7\xe3o..."})]})}),(0,s.jsxs)("div",{className:"absolute top-4 left-4 bg-white bg-opacity-95 rounded-lg p-3 shadow-md max-w-xs",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-gray-900 mb-2",children:"\uD83D\uDEE3️ Informa\xe7\xf5es da Rota"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Sa\xedda:"})," ",t.startLocation]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Destino:"})," ",t.destination]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Hor\xe1rio:"})," ",t.departureTime]}),t.distance&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Dist\xe2ncia:"})," ",t.distance]}),t.duration&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Dura\xe7\xe3o:"})," ",t.duration]})]})]}),(0,s.jsx)("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-95 rounded-lg p-2 shadow-md",children:(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{class:"flex items-center gap-2",children:[(0,s.jsx)("span",{class:"text-sm",children:"\uD83D\uDE80"}),(0,s.jsx)("span",{children:"Ponto de Partida"})]}),(0,s.jsxs)("div",{class:"flex items-center gap-2",children:[(0,s.jsx)("span",{class:"text-sm",children:"\uD83C\uDFC1"}),(0,s.jsx)("span",{children:"Destino"})]}),(0,s.jsxs)("div",{class:"flex items-center gap-2",children:[(0,s.jsx)("div",{class:"w-3 h-1 bg-green-600 rounded"}),(0,s.jsx)("span",{children:"Rota Planejada"})]})]})}),(0,s.jsx)("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,s.jsxs)("p",{className:"text-xs text-yellow-800",children:["⚠️ ",(0,s.jsx)("strong",{children:"Importante:"})," Respeite as leis de tr\xe2nsito, mantenha dist\xe2ncia segura e siga as orienta\xe7\xf5es dos organizadores durante todo o percurso."]})})]})}n(8689)}}]);