(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2665],{2665:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(5155),s=n(2115),r=n(5411),c=n.n(r);n(8689);var o=n(8025),l=n(6044);function i(e){let{selectedCountry:t,onProtestSelect:n,className:r=""}=e,i=(0,s.useRef)(null),d=(0,s.useRef)(null),[u,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)([]),[g,h]=(0,s.useState)("brazil"),b=(0,s.useRef)([]),f=()=>{let e=[...o.S];if((0,l.HP)()){let t=(0,l.rv)();e=[...o.S,...t]}x(e)};(0,s.useEffect)(()=>{let e;return f(),(0,l.HP)()&&(e=(0,l.NN)(f)),e},[]),(0,s.useEffect)(()=>{if(i.current)return c().accessToken="pk.eyJ1Ijoicm91dHN5IiwiYSI6ImNtY3ZlcmFqMjAyOW8ybXB6czB5d3ptNHoifQ.2Cso55oxJZVTHyq10QGg5g",d.current=new(c()).Map({container:i.current,style:"mapbox://styles/mapbox/streets-v12",center:"brazil"===g?[-51.9253,-14.235]:[0,20],zoom:"brazil"===g?4:2,attributionControl:!1}),d.current.addControl(new(c()).NavigationControl,"top-right"),d.current.addControl(new(c()).FullscreenControl,"top-right"),d.current.on("load",()=>{m(!0),y()}),()=>{d.current&&d.current.remove()}},[]),(0,s.useEffect)(()=>{u&&(v(),y())},[p,u,g]);let v=()=>{b.current.forEach(e=>e.remove()),b.current=[]},y=()=>{d.current&&(t?p.filter(e=>e.country===t):p).forEach(e=>{if(!e.coordinates)return;let a=Object.values(e.rsvps||{}).reduce((e,t)=>e+t,0),s="BR"===e.country,r=a>1e3?"large":a>100?"medium":"small",o=document.createElement("div");o.className="mapbox-protest-marker",o.innerHTML='\n        <div class="'.concat(D(r,s?"green":"blue"),'">\n          <div class="flex flex-col items-center justify-center h-full">\n            <span class="text-xs font-bold text-white">').concat(j(e.type),"</span>\n            ").concat(a>0?'<span class="text-xs text-white">'.concat(w(a),"</span>"):"","\n          </div>\n        </div>\n      "),o.addEventListener("click",()=>{n?n(e):window.location.href="/protest/".concat(e.id)});let l=new(c()).Marker(o).setLngLat(e.coordinates).addTo(d.current),i=new(c()).Popup({offset:25,className:"mapbox-protest-popup",maxWidth:"300px"}).setHTML(N(e,a));l.setPopup(i),b.current.push(l),t&&e.country===t&&i.addTo(d.current)})},D=(e,t)=>"".concat("rounded-full border-2 border-white shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:scale-110"," ").concat({small:"w-8 h-8",medium:"w-10 h-10",large:"w-12 h-12"}[e]," ").concat({green:"bg-green-600 hover:bg-green-700",blue:"bg-blue-600 hover:bg-blue-700"}[t]),j=e=>({manifestacao:"✊",marcha:"\uD83D\uDEB6",motociata:"\uD83C\uDFCD️",carreata:"\uD83D\uDE97",caminhoneiros:"\uD83D\uDE9B",tratorada:"\uD83D\uDE9C",assembleia:"\uD83C\uDFDB️"})[e]||"\uD83D\uDCE2",w=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString(),N=(e,t)=>{let n="BR"===e.country?"\uD83C\uDDE7\uD83C\uDDF7":"US"===e.country?"\uD83C\uDDFA\uD83C\uDDF8":"CA"===e.country?"\uD83C\uDDE8\uD83C\uDDE6":"FR"===e.country?"\uD83C\uDDEB\uD83C\uDDF7":"AR"===e.country?"\uD83C\uDDE6\uD83C\uDDF7":"\uD83C\uDF0D";return'\n      <div class="p-4 text-center max-w-xs">\n        <div class="flex items-center gap-2 mb-3 justify-center">\n          <span class="text-2xl">'.concat(n,'</span>\n          <h3 class="font-bold text-lg text-gray-900 truncate">').concat(e.title,'</h3>\n        </div>\n        <div class="text-sm text-gray-600 space-y-2 text-left">\n          <div class="flex items-center gap-2">\n            <span>\uD83D\uDCCD</span>\n            <span><strong>Local:</strong> ').concat(e.city,", ").concat(e.region,'</span>\n          </div>\n          <div class="flex items-center gap-2">\n            <span>\uD83D\uDCC5</span>\n            <span><strong>Data:</strong> ').concat(e.date,'</span>\n          </div>\n          <div class="flex items-center gap-2">\n            <span>\uD83D\uDD50</span>\n            <span><strong>Hor\xe1rio:</strong> ').concat(e.time,'</span>\n          </div>\n          <div class="flex items-center gap-2">\n            <span>\uD83D\uDC65</span>\n            <span><strong>Participantes:</strong> ').concat(t.toLocaleString("pt-BR"),'</span>\n          </div>\n          <div class="flex items-center gap-2">\n            <span>\uD83D\uDCE2</span>\n            <span><strong>Tipo:</strong> ').concat(e.type.charAt(0).toUpperCase()+e.type.slice(1),"</span>\n          </div>\n          ").concat("BR"!==e.country?'<div class="text-blue-600 font-medium mt-2">\uD83C\uDF0D Evento Internacional</div>':"","\n        </div>\n        <button \n          onclick=\"window.location.href='/protest/").concat(e.id,'\'"\n          class="mt-4 w-full px-4 py-2 ').concat("BR"===e.country?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700",' text-white rounded-lg text-sm font-medium transition-colors"\n        >\n          Ver Detalhes Completos\n        </button>\n      </div>\n    ')},C=e=>{h(e),d.current&&("brazil"===e?d.current.flyTo({center:[-51.9253,-14.235],zoom:4,duration:2e3}):d.current.flyTo({center:[0,20],zoom:2,duration:2e3}))},E=p.filter(e=>"BR"===e.country),R=p.filter(e=>"BR"!==e.country);return(0,a.jsxs)("div",{className:"relative ".concat(r),children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:p.length})," manifesta\xe7\xf5es encontradas"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>C("brazil"),className:"px-4 py-2 text-sm rounded-lg font-medium transition-colors ".concat("brazil"===g?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["\uD83C\uDDE7\uD83C\uDDF7 Brasil (",E.length,")"]}),R.length>0&&(0,a.jsxs)("button",{onClick:()=>C("global"),className:"px-4 py-2 text-sm rounded-lg font-medium transition-colors ".concat("global"===g?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["\uD83C\uDF0D Global (",R.length,")"]})]})]}),R.length>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-4",children:[(0,a.jsxs)("span",{children:["\uD83C\uDDE7\uD83C\uDDF7 Eventos nacionais: ",E.length]}),(0,a.jsxs)("span",{children:["\uD83C\uDF0D Di\xe1spora internacional: ",R.length]})]})]}),(0,a.jsx)("div",{ref:i,className:"w-full h-96 rounded-lg overflow-hidden border border-gray-300 shadow-md"}),!u&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Carregando mapa global..."})]})}),(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-white bg-opacity-95 rounded-lg p-3 shadow-md max-w-xs",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm text-gray-900 mb-2",children:"\uD83D\uDDFA️ Manifesta\xe7\xf5es em Tempo Real"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),(0,a.jsx)("span",{children:"Eventos no Brasil"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-600 rounded-full"}),(0,a.jsx)("span",{children:"Eventos Internacionais"})]}),(0,a.jsx)("div",{className:"border-t pt-1 mt-2",children:(0,a.jsx)("span",{children:"Tamanho = N\xfamero de participantes"})})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[(0,a.jsx)("p",{children:"\uD83D\uDDFA️ Clique nos marcadores para ver detalhes • Use os controles para navegar"}),0===p.length&&(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"Nenhuma manifesta\xe7\xe3o programada no momento"})]})]})}},8689:()=>{}}]);