"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6044],{6044:(t,e,a)=>{a.d(e,{H$:()=>y,HP:()=>O,NN:()=>l,OU:()=>v,Pj:()=>S,RV:()=>h,ZE:()=>g,i8:()=>I,lQ:()=>p,rv:()=>c,ui:()=>f});var o=a(9323);let r="marcha-brasil-demo-events",n="marcha-brasil-demo-thumbnails",i=[{state:"AC",capital:"Rio Branco",coordinates:[-67.8099,-9.9749]},{state:"AL",capital:"Macei\xf3",coordinates:[-35.7353,-9.6658]},{state:"AP",capital:"Macap\xe1",coordinates:[-51.0694,.0389]},{state:"AM",capital:"Manaus",coordinates:[-60.0261,-3.119]},{state:"BA",capital:"Salvador",coordinates:[-38.5014,-12.9714]},{state:"CE",capital:"Fortaleza",coordinates:[-38.5434,-3.7319]},{state:"DF",capital:"Bras\xedlia",coordinates:[-47.8825,-15.7975]},{state:"ES",capital:"Vit\xf3ria",coordinates:[-40.3376,-20.3155]},{state:"GO",capital:"Goi\xe2nia",coordinates:[-49.2643,-16.6864]},{state:"MA",capital:"S\xe3o Lu\xeds",coordinates:[-44.3068,-2.5307]},{state:"MT",capital:"Cuiab\xe1",coordinates:[-56.0925,-15.6014]},{state:"MS",capital:"Campo Grande",coordinates:[-54.6464,-20.4697]},{state:"MG",capital:"Belo Horizonte",coordinates:[-43.9378,-19.9167]},{state:"PA",capital:"Bel\xe9m",coordinates:[-48.5044,-1.4558]},{state:"PB",capital:"Jo\xe3o Pessoa",coordinates:[-34.8641,-7.1195]},{state:"PR",capital:"Curitiba",coordinates:[-49.2671,-25.4284]},{state:"PE",capital:"Recife",coordinates:[-34.8775,-8.0476]},{state:"PI",capital:"Teresina",coordinates:[-42.8019,-5.0892]},{state:"RJ",capital:"Rio de Janeiro",coordinates:[-43.1729,-22.9068]},{state:"RN",capital:"Natal",coordinates:[-35.2094,-5.7945]},{state:"RS",capital:"Porto Alegre",coordinates:[-51.2177,-30.0346]},{state:"RO",capital:"Porto Velho",coordinates:[-63.9004,-8.7619]},{state:"RR",capital:"Boa Vista",coordinates:[-60.6753,2.8235]},{state:"SC",capital:"Florian\xf3polis",coordinates:[-48.5482,-27.5954]},{state:"SP",capital:"S\xe3o Paulo",coordinates:[-46.6333,-23.5505]},{state:"SE",capital:"Aracaju",coordinates:[-37.0731,-10.9472]},{state:"TO",capital:"Palmas",coordinates:[-48.3603,-10.1753]}];function c(){try{!function(){try{let t=localStorage.getItem(r);if(!t)return;let e=JSON.parse(t),a=!1,o=e.map(t=>{if(t.coordinates)return t;a=!0;let e=i.find(e=>e.state===t.region),o=e?e.coordinates:[-46.6333,-23.5505];return{...t,coordinates:o}});a&&(localStorage.setItem(r,JSON.stringify(o)),console.log("Migrated demo events coordinates"))}catch(t){console.error("Error migrating demo events:",t)}}();let t=localStorage.getItem(r);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading demo events:",t),[]}}let s=[];function l(t){return s.push(t),()=>{let e=s.indexOf(t);e>-1&&s.splice(e,1)}}function d(){s.forEach(t=>t())}function u(t,e){if(e)try{let a=JSON.parse(localStorage.getItem(n)||"{}");a[t]=e,localStorage.setItem(n,JSON.stringify(a))}catch(e){console.warn("Failed to store thumbnail for ".concat(t,":"),e)}}function p(t){try{return JSON.parse(localStorage.getItem(n)||"{}")[t]}catch(e){console.warn("Failed to get thumbnail for ".concat(t,":"),e);return}}function m(t){let e={};return(({manifestacao:["populacaoGeral"],marcha:["populacaoGeral"],caminhoneiros:["caminhoneiros","populacaoGeral"],carreata:["carros","populacaoGeral"],motociata:["motociclistas","carros","populacaoGeral"],tratorada:["tratores","carros","populacaoGeral"],assembleia:["populacaoGeral","comerciantes","produtoresRurais"]})[t]||["populacaoGeral"]).forEach(t=>{e[t]=0}),e}function g(t){let e=Date.now(),a=[];if(t.isNational)i.forEach((r,n)=>{let i=(0,o.$8)(),c={id:"demo-".concat(e,"-").concat(r.state),title:"".concat(t.title," - ").concat(r.capital),description:"".concat(t.description,"\n\n\uD83C\uDDE7\uD83C\uDDF7 Evento Nacional - Simult\xe2neo em todas as capitais"),city:r.capital,region:r.state,country:"BR",date:t.date,time:t.time,location:t.meeting_point||"Centro de ".concat(r.capital),type:t.type,coordinates:r.coordinates,thumbnail:void 0,rsvps:m(t.type),createdBy:i.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};a.push(c),t.thumbnail&&u(c.id,t.thumbnail)});else{let r,n=t.country||"BR",c=t.state;if(t.isInternational&&"BR"!==n)r=({CA:[45.4215,-75.6972],US:[38.9072,-77.0369],UK:[51.5074,-.1278],DE:[52.52,13.405],FR:[48.8566,2.3522],IT:[41.9028,12.4964],ES:[40.4168,-3.7038],PT:[38.7223,-9.1393],JP:[35.6762,139.6503],AU:[-35.2809,149.13]})[n]||[0,0];else{let t=i.find(t=>t.state===c);r=t?t.coordinates:[-23.5505,-46.6333]}let s=(0,o.$8)(),l={id:"demo-".concat(e),title:t.title,description:t.description,city:t.city,region:c,country:n,date:t.date,time:t.time,location:t.meeting_point,type:t.type,coordinates:r,thumbnail:void 0,rsvps:m(t.type),createdBy:s.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t.final_destination&&(l.final_destination=t.final_destination),a.push(l),t.thumbnail&&u(l.id,t.thumbnail)}let n=[...c(),...a];try{localStorage.setItem(r,JSON.stringify(n)),d()}catch(t){console.error("Error saving demo event:",t)}return a}function f(){try{let t=localStorage.getItem(r);if(!t)return;let e=JSON.parse(t),a=!1,o=e.map(t=>t.city.toLowerCase().includes("toronto")&&"BR"===t.country?(a=!0,{...t,country:"CA",region:"ON"}):t);a&&(localStorage.setItem(r,JSON.stringify(o)),d(),console.log("Fixed Toronto events to use CA country code"))}catch(t){console.error("Error fixing Toronto events:",t)}}function S(){try{let t=localStorage.getItem(r);if(!t)return;let e=JSON.parse(t).map(t=>{let e=i.find(e=>e.state===t.region),a=e?e.coordinates:[-46.6333,-23.5505];return{...t,coordinates:a}});localStorage.setItem(r,JSON.stringify(e)),console.log("Force regenerated coordinates for",e.length,"demo events with correct [lng, lat] format"),d()}catch(t){console.error("Error force regenerating coordinates:",t)}}function y(t,e){try{let a=c(),o=a.findIndex(e=>e.id===t);if(-1===o)return console.error("Event not found for editing:",t),!1;let n={...a[o],title:e.title,description:e.description,type:e.type,date:e.date,time:e.time,location:e.meeting_point||e.location,city:e.city||a[o].city,region:e.state||a[o].region,country:e.country||a[o].country||"BR",final_destination:e.final_destination||a[o].final_destination,updatedAt:new Date().toISOString()};return a[o]=n,localStorage.setItem(r,JSON.stringify(a)),e.thumbnail&&u(t,e.thumbnail),d(),console.log("Successfully updated demo event:",t),!0}catch(t){return console.error("Error updating demo event:",t),!1}}function h(t){try{let e=c(),a=e.filter(e=>e.id!==t);if(a.length===e.length)return console.error("Event not found for deletion:",t),!1;localStorage.setItem(r,JSON.stringify(a));try{let e=JSON.parse(localStorage.getItem(n)||"{}");delete e[t],localStorage.setItem(n,JSON.stringify(e))}catch(t){console.warn("Failed to remove thumbnail:",t)}return d(),console.log("Successfully deleted demo event:",t),!0}catch(t){return console.error("Error deleting demo event:",t),!1}}function v(t){return c().find(e=>e.id===t)||null}function I(t,e,a){try{let o=c(),n=o.findIndex(e=>e.id===t);if(-1===n)return console.error("Event not found for RSVP:",t),!1;let i=o[n],s={caminhoneiro:"caminhoneiros",motociclista:"motociclistas",carro:"carros",produtor_rural:"produtoresRurais",comerciante:"comerciantes",populacao_geral:"populacaoGeral"}[e];if(!s)return console.error("Invalid participant type:",e),!1;i.rsvps=i.rsvps||{caminhoneiros:0,motociclistas:0,carros:0,tratores:0,produtoresRurais:0,comerciantes:0,populacaoGeral:0};let l=i.rsvps[s]||0;if(i.rsvps[s]=l+1,i.updatedAt=new Date().toISOString(),o[n]=i,localStorage.setItem(r,JSON.stringify(o)),a&&(a.email||a.phone))try{let o="marcha-brasil-rsvp-verification-".concat(t),r=JSON.parse(localStorage.getItem(o)||"[]");r.push({participantType:e,verification:a,timestamp:new Date().toISOString()}),localStorage.setItem(o,JSON.stringify(r))}catch(t){console.warn("Failed to store verification data:",t)}return d(),!0}catch(t){return console.error("Error adding RSVP:",t),!1}}function O(){return!0}},9323:(t,e,a)=>{a.d(e,{$8:()=>n,mt:()=>i});let o="marcha-brasil-user-session";function r(){try{let t=localStorage.getItem(o);return t?JSON.parse(t):null}catch(t){return console.error("Error loading user session:",t),null}}function n(){let t=r();if(!t){t={id:"user-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"Usu\xe1rio ".concat(Math.floor(1e3*Math.random())+1),createdAt:new Date().toISOString()};try{localStorage.setItem(o,JSON.stringify(t))}catch(t){console.error("Error saving user session:",t)}}return t}function i(t){let e=r();return!!e&&!!t.createdBy&&e.id===t.createdBy}}}]);